import React from "react";
import { Typography, Tag } from "antd";
import { Heart, Info } from "lucide-react";
import type { Train } from "../../pages/TicketPage/TicketPage";
import styles from "./TrainCard.module.css";

const { Text } = Typography;

interface TrainCardProps {
  train: Train;
  onSelect: (train: Train) => void;
}
/**
 * TrainCard component displays key information about a train option such as time, duration,
 * price (standard and plus), number of changes, and whether it's recommended or cheapest.
 * Allows selection of a train when clicked.
 *
 * @param {TrainCardProps} props - The props for the TrainCard component.
 * @param {Train} props.train - Train object containing journey details.
 * @param {(train: Train) => void} props.onSelect - Callback function when a train is selected.
 *
 * @returns {JSX.Element} Rendered train card component.
 */
const TrainCard: React.FC<TrainCardProps> = ({ train, onSelect }) => {
  return (
    <div
      className={`${styles.card} ${
        train.isRecommended ? styles.cardRecommended : ""
      }`}
      onClick={() => onSelect(train)}
    >
      {/* Time & Duration + Heart */}
      <div>
        <div className={styles.timeContainer}>
          <Text strong className={styles.timeText}>
            {train.departureTime} → {train.arrivalTime}
          </Text>
        </div>
        <div>
          <Text type="secondary" className={styles.durationText}>
            {train.duration} • {train.changes} changes
          </Text>
        </div>
        <div className={styles.heartIcon}>
          <Heart size={16} />
        </div>
      </div>

      {/* Logo */}
      <div className={styles.logoContainer}>
        <svg
          data-testid="Eurostar"
          role="img"
          id="Eurostar"
          viewBox="0 0 68 18"
          width="68px"
          height="18px"
        >
          <title>Eurostar</title>
          <desc>Eurostar</desc>
          <path
            d="M37.8723 7.10358C37.8723 7.83951 37.0917 8.60452 35.7552 9.40084C35.7104 9.43103 35.6802 9.43104 35.6646 9.41538L35.6344 9.38518C35.6198 9.37064 35.5896 9.34044 35.6198 9.31024C36.1153 8.73985 36.3558 8.19964 36.3558 7.80931C36.3558 7.47938 36.131 7.31385 35.8156 7.31385C35.1702 7.31385 34.5696 7.98938 34.2397 9.35498L33.6391 11.8021C33.6246 11.8468 33.5944 11.8468 33.5787 11.8468H31.8977C31.8675 11.8468 31.8373 11.8468 31.853 11.7864L33.2186 6.3095C33.2331 6.26476 33.2633 6.26476 33.279 6.26476H35.1255C35.1557 6.26476 35.1702 6.29496 35.1557 6.32516L33.8796 8.25892C33.8494 8.30366 33.865 8.31932 33.8941 8.33386L33.9243 8.3484C33.9545 8.36294 33.969 8.36294 34.0149 8.30366L34.5551 7.59793C35.291 6.6372 35.8614 6.11713 36.7472 6.11713C37.4529 6.11825 37.8723 6.53319 37.8723 7.10358ZM23.1248 6.11825C20.9427 6.11825 19.3982 7.7903 19.3982 9.56972C19.3982 11.1143 20.4484 12.0034 21.9113 12.0034C22.8552 12.0034 24.0665 11.5997 24.9467 10.0272C24.9635 9.99808 24.9411 9.97347 24.9288 9.96453L24.8785 9.93097C24.8449 9.90637 24.8248 9.90972 24.808 9.92985C24.4714 10.3426 23.7757 10.9376 22.7333 10.9376C21.6663 10.9376 21.2749 10.1043 21.3476 9.09886C21.4214 8.05649 22.1562 6.46272 23.0644 6.46272C23.5789 6.46272 23.7265 6.9649 23.7265 7.5051C23.7265 7.79142 23.6873 8.07774 23.6437 8.28353C23.6348 8.32491 23.6035 8.35846 23.5632 8.36965L21.7279 8.89531C21.6876 8.90537 21.6675 8.92103 21.663 8.96018L21.6563 9.02057C21.6507 9.06643 21.6731 9.08544 21.7223 9.08544H25.0966C25.2073 9.08544 25.2654 9.03623 25.2777 8.98702C25.3639 8.70517 25.4131 8.41103 25.4131 8.12918C25.4108 7.0376 24.7062 6.11825 23.1248 6.11825ZM16.1849 10.0786L15.9277 10.2016C15.8662 10.2262 15.864 10.2766 15.8539 10.3124C15.7924 10.5327 15.7309 10.7541 15.6459 10.9991C14.7511 13.6229 12.3107 15.5477 9.36925 15.5477C5.72766 15.5477 2.7985 12.6297 2.7985 9.02504C2.7985 5.43265 5.72877 2.46658 9.36925 2.46658C12.3118 2.46658 14.4324 4.39139 15.3025 6.31621L10.0191 8.23879C9.95754 8.25109 9.89603 8.21418 9.89603 8.14037L9.49116 3.89817C9.49116 3.84896 9.46656 3.82435 9.41735 3.82435H9.29432C9.24511 3.82435 9.2205 3.84896 9.2205 3.89817L8.81787 8.14149C8.81787 8.2153 8.75636 8.25221 8.69484 8.23991L4.89443 7.18523C4.85752 7.17293 4.82061 7.18523 4.80831 7.23444L4.7591 7.34405C4.7468 7.39326 4.7591 7.41786 4.79601 7.44247L7.90971 9.01162C7.95892 9.02393 7.95892 9.08544 7.90971 9.11005L4.82061 10.6669C4.79601 10.6792 4.78371 10.7161 4.79601 10.753L4.83292 10.876C4.85752 10.9253 4.88213 10.9376 4.93134 10.9253L8.69484 9.88288C8.75636 9.87058 8.81787 9.89518 8.81787 9.9813L9.22274 14.2235C9.22274 14.2727 9.24734 14.2973 9.29656 14.2973H9.41958C9.46879 14.2973 9.4934 14.2727 9.4934 14.2235L9.89827 9.9813C9.89827 9.89518 9.95978 9.87058 10.0213 9.88288L13.8217 10.9376C13.8586 10.9499 13.8955 10.9376 13.9078 10.8883L13.957 10.7653C13.9693 10.7284 13.957 10.6915 13.9201 10.6792L10.8154 9.11005C10.7662 9.08544 10.7662 9.02393 10.8154 9.01162L15.7801 6.59694C15.8416 6.57233 15.8539 6.51082 15.8416 6.43812C15.1918 3.97422 12.6541 1.64453 9.20932 1.64453C5.01634 1.64453 1.84113 4.91817 1.84113 9.01274C1.84113 13.1196 5.01634 16.3563 9.20932 16.3563C12.7033 16.3563 15.2164 14.0882 16.0507 11.1333C16.1369 10.8145 16.2465 10.3247 16.2465 10.1155C16.2465 10.0786 16.2219 10.0663 16.1849 10.0786ZM32.2131 6.26588H30.5467C30.5165 6.26588 30.4863 6.26588 30.4717 6.31062L29.7962 9.08544C29.4964 10.3168 28.7751 10.9924 28.0101 10.9924C27.6052 10.9924 27.4095 10.8123 27.4095 10.4667C27.4095 10.3168 27.424 10.196 27.4699 9.98578L28.3859 6.32516C28.4004 6.26476 28.3557 6.26476 28.3411 6.26476H26.6601C26.6456 6.26476 26.6154 6.26476 26.5997 6.3095L25.7139 9.86499C25.6535 10.0898 25.5786 10.3906 25.5786 10.706C25.5786 11.442 26.0595 12.0023 27.0348 12.0023C28.0861 12.0023 28.8668 11.4263 29.4965 10.6155L29.7515 10.2855C29.7962 10.2251 29.8118 10.2251 29.842 10.2408L29.8722 10.2553C29.9024 10.2699 29.917 10.2855 29.8868 10.3303L29.001 11.7864C28.9864 11.8166 29.001 11.8468 29.0312 11.8468H30.833C30.8475 11.8468 30.8777 11.8468 30.8934 11.8021L32.259 6.32516C32.2735 6.26588 32.2288 6.26588 32.2131 6.26588ZM43.8794 8.44794C43.8794 10.4466 42.3103 12.0034 40.1282 12.0034C38.8409 12.0034 37.652 11.1948 37.652 9.67373C37.652 7.6751 39.2335 6.11825 41.4032 6.11825C42.7028 6.11825 43.8794 6.92799 43.8794 8.44794ZM42.1268 7.54089C42.1268 6.79266 41.7958 6.47391 41.3305 6.47391C40.6561 6.47391 40.1416 7.08681 39.8106 8.32491C39.5779 9.20735 39.4057 9.98018 39.4057 10.5808C39.4057 11.329 39.7368 11.6478 40.202 11.6478C40.8764 11.6478 41.3909 11.0226 41.722 9.79676C41.9669 8.9132 42.1268 8.14149 42.1268 7.54089ZM65.2984 6.11825C64.4126 6.11825 63.8422 6.63832 63.1063 7.59905L62.5661 8.30478C62.5213 8.36517 62.5057 8.36517 62.4755 8.34951L62.4453 8.33497C62.4151 8.32043 62.4006 8.30478 62.4308 8.26004L63.7069 6.32628C63.7214 6.29608 63.7069 6.26588 63.6767 6.26588H61.8302C61.8156 6.26588 61.7854 6.26588 61.7698 6.31062L60.4042 11.7876C60.3896 11.848 60.4187 11.848 60.4489 11.848H62.1299C62.1444 11.848 62.1746 11.848 62.1903 11.8032L62.7909 9.3561C63.1208 7.9905 63.7214 7.31497 64.3668 7.31497C64.6821 7.31497 64.9069 7.48049 64.9069 7.81043C64.9069 8.20076 64.6665 8.74096 64.171 9.31136C64.1408 9.34156 64.171 9.37176 64.1856 9.3863L64.2158 9.4165C64.2303 9.43103 64.2605 9.43104 64.3064 9.40196C65.6429 8.60675 66.4235 7.84063 66.4235 7.1047C66.4246 6.53319 66.0041 6.11825 65.2984 6.11825ZM47.3253 6.11825C45.6208 6.11825 44.7015 6.92687 44.7015 7.93234C44.7015 8.60675 45.1063 9.07202 45.9519 9.45228L46.8343 9.86946C47.5702 10.2005 47.7536 10.4455 47.7536 10.7765C47.7536 11.2664 47.3242 11.6343 46.4786 11.6343C45.8165 11.6343 45.3994 11.3033 45.3994 10.8134C45.3994 10.5193 45.5593 10.2598 45.7919 9.98018C45.8154 9.95222 45.8053 9.91867 45.7684 9.91867H44.1557C44.1188 9.91867 44.1076 9.9388 44.0942 9.96788C44.0517 10.0585 44.0024 10.2687 44.0024 10.4455C44.0024 11.3525 44.7988 12.0023 46.3925 12.0023C48.2189 12.0023 49.2982 11.1076 49.2982 10.0529C49.2982 9.42768 48.9548 9.02281 47.974 8.56984L47.0792 8.16497C46.5155 7.90773 46.2941 7.6505 46.2941 7.30714C46.2941 6.84075 46.6867 6.48621 47.3488 6.48621C47.9494 6.48621 48.3419 6.89108 48.3419 7.39326C48.3419 7.58898 48.2715 7.82385 48.1585 8.01958C48.1417 8.04978 48.1451 8.09228 48.201 8.09228H49.6908C49.74 8.09228 49.7523 8.06767 49.7523 8.01846C49.8261 7.20983 49.1271 6.11825 47.3253 6.11825ZM60.4276 7.88425C60.4276 8.12918 60.4019 8.37188 60.3169 8.70517L59.5228 11.7987C59.5105 11.848 59.4736 11.848 59.4613 11.848H57.6595C57.6349 11.848 57.6226 11.8111 57.6349 11.7864L58.5174 10.3235C58.5397 10.2878 58.5364 10.262 58.5051 10.2497L58.4682 10.2374C58.4301 10.2251 58.3988 10.2329 58.3697 10.2743L58.1248 10.6054C57.4873 11.414 56.7335 12.0034 55.6911 12.0034C54.8087 12.0034 54.2204 11.4397 54.2204 10.6792C54.2204 9.52722 55.3668 8.95011 56.4091 8.8036C57.201 8.69175 58.1237 8.55083 58.5151 8.49826C58.5767 8.49044 58.6281 8.44682 58.6471 8.38754C58.7601 8.02629 58.8742 7.65832 58.8742 7.32056C58.8742 6.84299 58.6538 6.48733 57.9302 6.48733C57.3419 6.48733 56.8755 6.83069 56.8755 7.57892C56.8755 7.71425 56.8878 7.87306 56.9247 8.0453C56.9247 8.06991 56.9124 8.09451 56.8755 8.09451H55.1107C55.0983 8.09451 55.0771 8.08557 55.0737 8.0576C54.9641 6.99957 55.9685 6.12048 58.004 6.12048C59.8483 6.11825 60.4276 7.03872 60.4276 7.88425ZM58.4447 8.87853C57.0411 9.12794 56.0412 9.57084 56.0412 10.2933C56.0412 10.7128 56.4147 10.9364 56.795 10.9364C57.5678 10.9364 58.079 10.2016 58.4995 8.94004C58.5174 8.88972 58.4805 8.87182 58.4447 8.87853ZM53.7853 10.3459L53.7406 10.3157C53.7115 10.2978 53.6958 10.3012 53.6656 10.3303C53.4252 10.5707 52.9297 10.9308 52.4801 10.9308C52.1345 10.9308 51.9399 10.7206 51.9399 10.4052C51.9399 10.2397 51.9701 10.0752 52.0305 9.87952L52.9465 6.75687H54.5224C54.5526 6.75687 54.5828 6.75687 54.5973 6.71213L54.7024 6.32404C54.717 6.26364 54.6722 6.26364 54.6577 6.26364H53.0639L53.5449 4.73028C53.5594 4.68554 53.5303 4.66988 53.5001 4.66988H53.395C53.3648 4.66988 53.3346 4.66988 53.3044 4.71462C52.5987 5.76594 51.7129 6.29049 50.3316 6.51641L50.241 6.53095C50.1213 6.54549 50.1214 6.56115 50.1057 6.60588L50.0912 6.68082C50.0766 6.75575 50.1359 6.75575 50.1515 6.75575H51.0977L50.1974 9.84821C50.0923 10.2083 50.0319 10.5092 50.0319 10.7642C50.0319 11.5594 50.647 12.0001 51.4433 12.0001C52.734 12.0001 53.5896 10.7183 53.7999 10.4186C53.8211 10.3918 53.8189 10.3694 53.7853 10.3459Z"
            fill="#00286A"
          ></path>
        </svg>
      </div>

      {/* Standard Price */}
      <div className={styles.priceContainer}>
        {train.standardPrice ? (
          <div
            className={`${styles.priceGroup} ${
              train.isCheapest ? styles.cheapestPriceGroup : ""
            }`}
          >
            <Text strong className={styles.priceText}>
              ${train.standardPrice}
            </Text>
            {train.isCheapest && (
              <Tag className={styles.cheapestTag}>Cheapest</Tag>
            )}
          </div>
        ) : (
          <Text type="secondary">Not available</Text>
        )}
      </div>
      {/* Plus Price */}
      <div className={styles.plusPriceContainer}>
        {train.plusPrice ? (
          <Text strong className={styles.priceText}>
            ${train.plusPrice}
          </Text>
        ) : (
          <Text type="secondary">Not available</Text>
        )}
      </div>

      {/* Recommendation Banner */}
      {train.isRecommended && train.isCheapest && (
        <div className={styles.recommendationBanner}>
          <Info size={16} />
          We recommend this journey based on price and duration.
        </div>
      )}
    </div>
  );
};

export default TrainCard;
